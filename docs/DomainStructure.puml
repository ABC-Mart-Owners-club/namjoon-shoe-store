@startuml

class Shoe {
Long shoeCode
String shoeName
String color
int size
BigDecimal price
+ _create()
}

enum OrderStatus {
NORMAL
CANCELLED
}

class Order {
Long orderNo
OrderStatus status
List<OrderDetail> details
CouponDiscount couponDiscount
List<String> paymentIds
+ _create()
+ totalCancel()
+ partialCancel()
+ updatePaymentIds()
+ getCurrentTotalAmount()
+ getAmountToCancel()
- validateAvailableCancel()
- validateAllCancelled()
}

class OrderDetail {
Long orderDetailNo
OrderStatus orderDetailStatus
String shoeProductCode
BigDecimal unitPrice
Long count
BigDecimal discountPrice
+ _create()
+ getShoeCode()
+ getPayAmount()
# totalCancel()
# partialCancel()
+ isNormal()
+ isCancel()
}

enum PaymentType {
CASH
CREDIT_CARD
}

enum CreditCardType {
SHINHAN
SAMSUNG
KB_KOOKMIN
HYUNDAI
LOTTE
WOORI
HANA
BC
}

abstract class Payment {
String id
PaymentType type
BigDecimal paidAmount
# updatePaidAmount()
+ updatePaidAmountToZero()
+ validateAvailableCancel()
+ partialCancel()
}

class CashPayment {
+ _payInCash()
}

class CardPayment {
CreditCardType creditCardType
+ _payInCreditCard()
}

class Inventory {
Long shoeCode
LocalDate stockedDate
Long stock
+ _create()
+ restock()
+ deductStock()
- validateRequestStock()
}

abstract class Discount {
int discountRate
+ _getDiscountType() {abstract}
+ calculateDiscount() {abstract}
}

class InventoryDiscount {
+ _getDiscountType()
+ calculateDiscount()
}

class CouponDiscount {
LocalDateTime createdAt
+ _getDiscountType()
+ calculateDiscount()
}

Order <-- OrderDetail
Payment <-- CashPayment
Payment <-- CardPayment
Inventory -- Shoe
Discount <-- InventoryDiscount
Discount <-- CouponDiscount
Order <-- CouponDiscount

@enduml